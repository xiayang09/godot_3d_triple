[gd_scene load_steps=3 format=3 uid="uid://cddrbnno68635"]

[ext_resource type="Theme" uid="uid://1ufiqhcbexv4" path="res://asset/UI/theme/base_theme.tres" id="2_uf8v2"]

[sub_resource type="GDScript" id="GDScript_0b56n"]
script/source = "extends Control
@export var player: playerx
@export var _3DUI: Node3D
var GamePauseState := false
enum Bus{Master ,Music, SFX}
func _ready() -> void:
	pass
func _input(event: InputEvent) -> void:
	if event.is_action_pressed(\"Esc\"):
		if GamePauseState:
			continueGame()
		else:
			PauseGame()
func _on_esc_pressed() -> void:
	PauseGame()
func _on_continue_pressed() -> void:
	continueGame()
func _on_exit_pressed() -> void:
	get_tree().quit()
func continueGame() ->void:
	get_tree().paused = false
	self.get_node(\"GameScreen\").visible = true
	self.get_node(\"PauseScreen\").visible = false
	GamePauseState = false
	if Global.overlook_mode==Global.mouseleft:
		self.get_node(\"GameScreen/HBoxContainer/Label2\").text = \"鼠标左键\"
		return
	if Global.overlook_mode==Global.mouseright:
		self.get_node(\"GameScreen/HBoxContainer/Label2\").text = \"鼠标右键\"
		return
	if Global.overlook_mode==Global.wasd:
		self.get_node(\"GameScreen/HBoxContainer/Label2\").text = \"W A S D\"
		return
func PauseGame() -> void:
	self.get_node(\"GameScreen\").visible = false
	self.get_node(\"PauseScreen\").visible = true
	GamePauseState = true
	get_tree().paused = true
func _on_music_value_changed(value: float) -> void:
	Global.set_volume(1 ,value*0.002)
func _on_sfx_value_changed(value: float) -> void:
	Global.set_volume(2 ,value*0.002)

func _on_option_button_item_selected(index):
	if index == 0:
		Global.change_character(player,\"Suzanne_001\")
	elif index == 1:
		Global.change_character(player,\"Ball_001\")
	elif index == 2:
		Global.change_character(player,\"Teapot\")
	else:
		pass

func _on_esc_mouse_entered():
	Global.ButtonEnter = true

func _on_esc_mouse_exited():
	Global.ButtonEnter = false


func _on_move_method_item_selected(index):
	Global.overlook_mode = index
	_3DUI.get_node('Mouse_click_ring').visible = false	
"

[node name="Main_UI" type="Control"]
process_mode = 3
layout_mode = 3
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
script = SubResource("GDScript_0b56n")

[node name="GameScreen" type="Control" parent="."]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
theme = ExtResource("2_uf8v2")

[node name="Esc" type="Button" parent="GameScreen"]
layout_mode = 1
offset_left = 29.0
offset_top = 22.0
offset_right = 109.0
offset_bottom = 62.0
theme = ExtResource("2_uf8v2")
theme_override_font_sizes/font_size = 20
text = "ESC"

[node name="HBoxContainer" type="HBoxContainer" parent="GameScreen"]
layout_mode = 1
anchors_preset = 2
anchor_top = 1.0
anchor_bottom = 1.0
offset_left = 30.935
offset_top = -70.01
offset_right = 304.935
offset_bottom = -28.01
grow_vertical = 0

[node name="Label" type="Label" parent="GameScreen/HBoxContainer"]
layout_mode = 2
theme_override_font_sizes/font_size = 20
text = "移动方式："

[node name="Label2" type="Label" parent="GameScreen/HBoxContainer"]
layout_mode = 2
theme_override_font_sizes/font_size = 20
text = "鼠标左键"

[node name="PauseScreen" type="Control" parent="."]
visible = false
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
theme = ExtResource("2_uf8v2")

[node name="ColorRect" type="ColorRect" parent="PauseScreen"]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
color = Color(0.70865, 0.383873, 0.0692319, 0.741176)

[node name="box" type="HBoxContainer" parent="PauseScreen"]
layout_mode = 1
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -170.0
offset_top = -154.0
offset_right = 170.0
offset_bottom = 2.0
grow_horizontal = 2
grow_vertical = 2
alignment = 1

[node name="name" type="VBoxContainer" parent="PauseScreen/box"]
layout_mode = 2

[node name="move" type="Label" parent="PauseScreen/box/name"]
layout_mode = 2
size_flags_vertical = 6
text = "移动方式："
horizontal_alignment = 2

[node name="jump" type="Label" parent="PauseScreen/box/name"]
layout_mode = 2
size_flags_vertical = 6
text = "能否跳跃："
horizontal_alignment = 2
vertical_alignment = 1

[node name="Music2" type="Label" parent="PauseScreen/box/name"]
layout_mode = 2
size_flags_vertical = 6
text = "背景音乐："
horizontal_alignment = 2
vertical_alignment = 1

[node name="SFX2" type="Label" parent="PauseScreen/box/name"]
layout_mode = 2
size_flags_vertical = 6
text = "音效："
horizontal_alignment = 2
vertical_alignment = 1

[node name="SFX3" type="Label" parent="PauseScreen/box/name"]
layout_mode = 2
size_flags_vertical = 6
text = "切换角色："
horizontal_alignment = 2
vertical_alignment = 1

[node name="set" type="VBoxContainer" parent="PauseScreen/box"]
layout_mode = 2

[node name="moveMethod" type="OptionButton" parent="PauseScreen/box/set"]
layout_mode = 2
size_flags_vertical = 3
theme_override_font_sizes/font_size = 22
item_count = 3
selected = 0
popup/item_0/text = "鼠标左键"
popup/item_0/id = 0
popup/item_1/text = "鼠标右键"
popup/item_1/id = 1
popup/item_2/text = "WASD"
popup/item_2/id = 2

[node name="jump" type="CheckButton" parent="PauseScreen/box/set"]
layout_mode = 2
size_flags_horizontal = 0
size_flags_vertical = 3
theme_override_font_sizes/font_size = 18
text = "空格"

[node name="music" type="HSlider" parent="PauseScreen/box/set"]
layout_mode = 2
size_flags_horizontal = 3
size_flags_vertical = 3
value = 50.0

[node name="SFX" type="HSlider" parent="PauseScreen/box/set"]
layout_mode = 2
size_flags_horizontal = 3
size_flags_vertical = 3
value = 80.0

[node name="OptionButton" type="OptionButton" parent="PauseScreen/box/set"]
layout_mode = 2
theme_override_font_sizes/font_size = 22
item_count = 3
popup/item_0/text = "苏珊猴子"
popup/item_0/id = 0
popup/item_1/text = "圆球"
popup/item_1/id = 1
popup/item_2/text = "茶壶"
popup/item_2/id = 2

[node name="HBoxContainer" type="HBoxContainer" parent="PauseScreen"]
layout_direction = 1
layout_mode = 1
anchors_preset = 7
anchor_left = 0.5
anchor_top = 1.0
anchor_right = 0.5
anchor_bottom = 1.0
offset_left = -180.0
offset_top = -135.48
offset_right = 180.001
offset_bottom = -85.48
grow_horizontal = 2
grow_vertical = 0
pivot_offset = Vector2(180, 25)
alignment = 1

[node name="Continue" type="Button" parent="PauseScreen/HBoxContainer"]
layout_mode = 2
size_flags_horizontal = 6
toggle_mode = true
text = " 继续游戏 "

[node name="Exit" type="Button" parent="PauseScreen/HBoxContainer"]
layout_mode = 2
size_flags_horizontal = 6
text = "退出游戏"

[connection signal="mouse_entered" from="GameScreen/Esc" to="." method="_on_esc_mouse_entered"]
[connection signal="mouse_exited" from="GameScreen/Esc" to="." method="_on_esc_mouse_exited"]
[connection signal="pressed" from="GameScreen/Esc" to="." method="_on_esc_pressed"]
[connection signal="item_selected" from="PauseScreen/box/set/moveMethod" to="." method="_on_move_method_item_selected"]
[connection signal="value_changed" from="PauseScreen/box/set/music" to="." method="_on_music_value_changed"]
[connection signal="value_changed" from="PauseScreen/box/set/SFX" to="." method="_on_sfx_value_changed"]
[connection signal="item_selected" from="PauseScreen/box/set/OptionButton" to="." method="_on_option_button_item_selected"]
[connection signal="pressed" from="PauseScreen/HBoxContainer/Continue" to="." method="_on_continue_pressed"]
[connection signal="pressed" from="PauseScreen/HBoxContainer/Exit" to="." method="_on_exit_pressed"]
